<article class="recipe-card">
    <div class="recipe-card-image">
        <a href="{{ .Permalink }}" class="recipe-card-link" aria-label="Voir la recette : {{ .Title }}">

            {{/* 1. INITIALISATION DES VARIABLES IMAGE */}}
            {{ $imgURL := "" }}

            {{ if .Params.image }}
            {{/* Cas 1 : Image d√©finie dans le Frontmatter (dossier static) */}}
            {{ $imgURL = .Params.image | relURL }}
            {{ else if .Params.featured_image }}
            {{/* Cas 2 : Autre nom de variable */}}
            {{ $imgURL = .Params.featured_image | relURL }}
            {{ else if .Resources.GetMatch "featured*" }}
            {{/* Cas 3 : Image dans le dossier de la page (Page Bundle) */}}
            {{ $res := .Resources.GetMatch "featured*" }}
            {{ $imgURL = $res.RelPermalink }}
            {{ end }}

            {{/* 2. AFFICHAGE DE L'IMAGE OPTIMIS√âE */}}
            {{ if $imgURL }}
            <img src="{{ $imgURL }}" alt="Photo de : {{ .Title }}" loading="lazy" width="400" height="225"
                style="object-fit: cover; aspect-ratio: 16/9;">
            {{/* 'object-fit' emp√™che l'image d'√™tre d√©form√©e si elle n'est pas 16:9 √† la base */}}
            {{ else }}
            {{/* Fallback si aucune image */}}
            <div class="placeholder-image" aria-hidden="true">
                <span>üçå</span>
            </div>
            {{ end }}
        </a>
    </div>

    <div class="recipe-card-content">
        <div class="recipe-meta">
            {{/* Cat√©gorie */}}
            {{ with .Params.categories }}
            {{ range first 1 . }}
            <span class="recipe-category">{{ . }}</span>
            {{ end }}
            {{ end }}

            {{/* Temps de cuisson (Logique robuste) */}}
            {{ $time := "30m" }} {{/* Valeur par d√©faut */}}
            {{ if .Params.recipe.time.total_human }}
            {{ $time = .Params.recipe.time.total_human }}
            {{ else if .Params.prep_time }}
            {{ $time = .Params.prep_time }}
            {{ end }}

            <span class="recipe-time" aria-label="Temps total : {{ $time }}">‚è± {{ $time }}</span>
        </div>

        <h3 class="recipe-title">
            <a href="{{ .Permalink }}">{{ .Title }}</a>
        </h3>

        {{/* R√©sum√© SEO (Limit√© √† 90 caract√®res pour ne pas casser le design de la carte) */}}
        <p class="recipe-excerpt">
            {{ .Params.description | default .Summary | plainify | truncate 90 }}
        </p>
    </div>
</article>