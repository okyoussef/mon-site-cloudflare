<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

{{/* 1. PRIORITÉ ABSOLUE : L'IMAGE LCP (Indispensable pour Discover & Vitesse) */}}
{{ $og_image := "" }}
{{ if .IsPage }}
{{ $img := .Params.image | default .Params.featured_image }}
{{ if $img }}
{{ $resource := resources.Get $img }}
{{ if $resource }}
{{/* On reste sur q75 pour un meilleur équilibre poids/qualité Google */}}
{{ $optimized := $resource.Fill "1200x675 webp q75" }}
{{ $og_image = $optimized.Permalink }}
<link rel="preload" as="image" href="{{ $optimized.Permalink }}" fetchpriority="high">
{{ else }}
{{ $og_image = $img | absURL }}
<link rel="preload" as="image" href="{{ $og_image }}" fetchpriority="high">
{{ end }}
{{ end }}
{{ else }}
{{ with site.Params.social.image }}{{ $og_image = . | absURL }}{{ end }}
{{ end }}

{{/* 2. PRÉ-CONNEXION AUX POLICES (Après l'image) */}}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

{{/* 3. TITRE ET CANONICAL */}}
<title>{{ if .IsHome }}{{ site.Title }} - {{ site.Params.description }}{{ else }}{{ .Title }} | {{ site.Title }}{{ end
    }}</title>
<link rel="canonical" href="{{ .Permalink }}" />

{{/* 4. CSS ET POLICES (Le navigateur les chargera en parallèle de l'image) */}}
<link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@400;700&display=swap"
    rel="stylesheet">
{{ $style := resources.Get "css/main.css" | resources.Minify | resources.Fingerprint }}
<link rel="stylesheet" href="{{ $style.RelPermalink }}" integrity="{{ $style.Data.Integrity }}">

{{/* Le reste de ton code (Description, OG, Twitter, Schema) ne bouge pas */}}